<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
#output
{
    padding: 1px;           /*To make sure that the input and the label will not overlap the border, If you remove this line it will not display correctly on Opera 15.0*/
    border: 1px solid activeborder; /*Create our fake border :D*/
    background-color: black;
    font-family:monospace;
    color: white;
}
</style>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<title>Sudoku solver in your browser</title>
</head>

<body>

<h1>Sudoku solver in your browser</h1>

<textarea rows="20" cols="50" id="input">
1__6__8__
_2__7__9_
__3__8__1
2__4__9__
_3__5__1_
__4__6__2
3__5__7__
_4__6__8_
__5__7__4
</textarea>

<br>

<script>
var Module = {
    noInitialRun : true,
    'print': function(text) {
        var element = document.getElementById('output');
        element.innerHTML += text.replace('\n', '<br>', 'g') + '<br>';
        //console.log(text);
    }
};
</script>
<script type='text/javascript' src="minisat.js"></script>
<button id="solve">Solve!</button>

<script type='text/javascript'>
$("#solve").click(function() {
    var element = document.getElementById('output');
    element.innerHTML = ""

    //htmlstuff = Module.cwrap('htmlstuff_c', 'int', ['string']);
    htmlstuff = Module.cwrap('htmlstuff_c', 'string', ['string']);

    var input_str = document.getElementById("input").value.replace(/\s/g, "")
    console.log(input_str)
    var result_str = htmlstuff(input_str);
    console.log(result_str)

    var result = $("#result");
    result.empty();
    if (result != "") {
        for (var i = 0; i < 9; i++) {        
            result.append(document.createTextNode(result_str.substr(i*9,9)))
            result.append(document.createElement("br"))
        }
    }
});
</script>

<h2>Result</h2>
<div id="result"></div>

<h2>Log</h2>
<div id="output"></div>

<hr>

<p>
Powered by <a href="http://minisat.se/">MiniSat</a> and <a href="http://kripken.github.io/emscripten-site/">emscripten</a>; Special thanks to “<a href="http://www.msoos.org/2013/09/minisat-in-your-browser/">MiniSat in your browser</a>” article of Mate Soos.
</p>

</body>

</html>

